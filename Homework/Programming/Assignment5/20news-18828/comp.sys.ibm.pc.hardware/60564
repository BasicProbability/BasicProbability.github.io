From stamnetcomcom David Stam
Subject Re Recommendations for a Local BUS Cache

Penio Penev penevrockefelleredu wrote

I have a Maxtor 212MB on an ISA IDE controller although my machine is
DX266 VLB I has the save transfer rate of 0647 MBs regardless of
the variations of the ISA bus speed I tested it with speed between
55MHz and 833MHz Not any difference The problem is not the
interface between the controller and the memory


Chris Brinton brintonicdteradynecom wrote
 I also have a DX266 and a Maxtor 212 I have a local bus IDE controller generic and I get
 985 KBs I tried swapping my local bus IDE controller for an ISA IDE controller and my
 transfer rate went to 830 KBs The specs for this drive show a maximum platter to controller
 transfer rate of 283 MBs I dont know how to get there from here The local bus interface
 got me a little but certainly not as much as I had hoped I am also looking for a way to 

What is the deal with the IDE transfer rates  Is anybody getting throughput
anywhere close to the plattercontroller rate  I havent seen anything
even close to the 5MBsec limit of the IDE interface  These drives are 11
noninterleaved arent they

Here are the rates I get

1 sequential read MSDOS C program that uses bios calls to read 64sector
                    blocks sequentially from outside first track inward

                     8mhz bus    10mhz bus
                         
   MAXTOR LXT340    860KBsec   976KBsec
   QUANTUM LPS240   862KBsec   887KBsec

2 disk buffer read same C program but rereads the same block repeatedly
                     so in effect is reading the RAM buffer on the drive

                     8mhz bus    10mhz bus
                         
   MAXTOR LXT340   1046KBsec  1212KBsec
   QUANTUM LPS240  1015KBsec  1276KBsec

3 CORETEST V27 transfer rate seems to agree with 2 above

                     8mhz bus    10mhz bus
                         
   MAXTOR LXT340   1051KBsec  1224KBsec
   QUANTUM LPS240  1026KBsec  1298KBsec

I managed to get hold of the QUANTUM LPS240AT product manual and it goes
into excrutiating detail describing how the bits get from the platter
through the controller and out the IDE interface  Nowhere do I see
anything like after the bits are whipped of the platter at high speed
they sit around in a buffer to thaw before they are sent to the host
even though I SWEAR thats whats happening   Here are some relevent
quotes from the manual

  Data is transferred from the disk to the read buffer at a rate of
   375 MBs maximum 187MBs minimum  My calculations show 3121KBsec
   maximum and 1578KBsec minimum  disk spins at 4306 RPM with 87
   sectors per track on the outside and 44 on the inside

  Single burst errors of up to 24 bits within one sector can be corrected
   onthefly in real time as they occur allowing a high degree of
   data integrity with no impact to the drives performance  I take
   this to mean error correction isnt the bottleneck

  For pagemode operations the datatransfer rate to and from the buffer
   RAM is up to 100 MBs This high transfer rate allows the AT Interface
   IC to communicate over the AT bus at a datatransfer rate of 50 MBs
   while the DCS simultaneously controls disktoRAM transfers
                 
So the thing can even do its cache prefetch WHILE its sending the
requested sector it has 3 64KB read buffers for prefetching I guess
you could call that a cache 

So when I do a sequential read on the outer tracks WHY am I getting a
measly 862KBsec when I should be getting around 3MBsec

Any of you harddisk engineers out there know


Wondering why my disks are so slow  
David
                        o o
oOOOOo
David Stam                            Linux The choice of a GNU generation
stamnetcomcom                       386unxX11R5OpenlookgccTeXFREE
