From dcbwdl1wdlloralcom David C Blume
Subject Cannot move data fast enough

I want to achieve an overall throughput rate of around 5 megabytes  sec
for very large data transfers  Around 5 MB

I have a Quadra 950 
I have a NuBus network card that can pump data in to mac memory at 85 MBs
         using blockmode transfers
I have a highspeed disk array no asynchronous PB calls that can
         achieve 68 MBs

Lets say all transfers go from disk to buffer to network card

It is not enough to first transfer all the data from the disk to buffer
then transfer all the data from the buffer to card  68 MBs then 85 MBs
result in an overall 38 MBs  Too slow

So I tried the following scheme For an nmegabyte transfer 

Step 1                                Load the 1st MB from disk to buffer
Step 2 Asynch send 1st MB out card   Load the 2nd MB from disk to buffer
Step 3 Asynch send 2nd MB out card   Load the 3rd MB from disk to buffer
        
Step n Asynch send the n1 MB out card Load the nth MB from disk to buffer
Step n1 Send the nth MB out card

Even though the code apparently does execute the card transfer asynchronously
and the card does not use the Mac cpu at all  It is using the buffer tho
each of the steps 2 through n take as long as if the two transfers were
executed one after another  So there is no improvement in the rate

Why

Is the mac RAM dualport  So the NuBus card and the disk driver can both
access data at the same time
Is the problem that the two devices card and disk driver both have to use
the same bus to mac RAM

Is there anything I can do

David

 David Blume             I get tired thinking of all the things I  
 dcbwdl1wdlloralcom   dont want to do  Bukowski Barfly  

