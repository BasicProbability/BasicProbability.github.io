From gerarddpscoUK Gerard ODriscoll
Subject Re Creating 8 bit windows on 24 bit display How


stolkfwiuvanl writes

 
 A problem occurs when I try to create a window with a visual that is different
 from the visual of the parent which uses the default visual which is TC24
 

Youve got to set borderpixel in your window attributes The default
is CopyFromParent which gives the BadMatch Do this

   
   unsigned long valuemask
   
   
     if borderwidth is nonzero youd better alloc a colour from cmap
     rather than use any old pixel value Also use valuemask it makes
     the code more obvious
    
   attrcolormap  cmap
   attrborderpixel  0
   valuemask  CWColormap  CWBorderPixel
   win  XCreateWindow
           dpy
           DefaultRootWindowdpy
           1010
           widthheight
           0		          border width see comment below 
           8                     depth 
           InputOutput           class 
           vinfovisual          visual 
           valuemask
           attr
         

A note on borderwidth your code looked like this

   win  XCreateWindow
           dpy
           DefaultRootWindowdpy
           1010
           widthheight
           CopyFromParent        border width 
           8                     depth 
           InputOutput           class 
           vinfovisual          visual 
           CWColormap
           attr
         

borderwidth set to CopyFromParent works but doesnt make sense
borderwidth should be an unsigned int You get away with it because
CopyFromParent is defineed to be zero in Xh If it happened to be
defined as 1 youd get a very interesting looking window

 	Gerard ODriscoll gerardodriscolldpscouk
 	Du Pont Pixel Systems Ltd
 
