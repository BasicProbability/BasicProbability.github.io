From gdmrdcsedacuk George Ross
Subject twm  greyscale

As distributed twm thinks everything with three or more colormap cells must
be a colour screen  Heres a patch to have it use the screens visual class

 twmcDIST	Wed May 12 145655 1993
 twmc	Wed May 12 154753 1993

 343352 
 343384 
  
  	ScrXORvalue  unsigned long 1  Scrddepth  1
  
 ifdef oldCode
  	if DisplayCellsdpy scrnum  3
  	    ScrMonochrome  MONOCHROME
  	else
  	    ScrMonochrome  COLOR
 else
 		XVisualInfo template
 		XVisualInfo visualInfo
 		int nitems
 
 		templatevisual  DefaultVisualdpy scrnum
 		templatevisualid  XVisualIDFromVisualtemplatevisual
 		templatescreen  scrnum
 		visualInfo  XGetVisualInfodpy VisualIDMaskVisualScreenMask
 				template nitems
 		if nitems  1 
 			switch visualInfoclass 
 		case StaticColor
 		case PseudoColor
 		case TrueColor
 		case DirectColor
 				ScrMonochrome  COLOR
 				break
 
 		default	ScrMonochrome  MONOCHROME
 				break
 			
 		
 		else 
 			void fprintfstderr
 					d Visual matches assuming monon
 					nitems
 			ScrMonochrome  MONOCHROME   assume 
 		
 	
 endif
  
  	 setup default colors 
  	ScrFirstTime  TRUE

 
George D M Ross Department of Computer Science University of Edinburgh
     Kings Buildings Mayfield Road Edinburgh Scotland EH9 3JZ
Mail gdmrdcsedacuk      Voice 031650 5147      Fax 031667 7209
